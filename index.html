<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andrea Asteroids</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            overflow: hidden;
            background: linear-gradient(45deg, #ff0000, #ff7300, #fffa00, #00ff00, #00ffff, #0000ff, #ff00ff);
            background-size: 400% 400%;
            animation: bg-animation 10s infinite alternate linear;
        }

        @keyframes bg-animation {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }

        canvas { display: block; background: rgba(0, 0, 0, 0.2); }

        /* Mensaje de ganar o perder */
        #gameResult {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 30px;
            color: white;
            font-weight: bold;
        }

        #gameResult img {
            width: 300px;
            height: auto;
        }

    </style>
</head>
<body>

    <audio id="impactSound" src="impact.mp3"></audio>
    <canvas id="gameCanvas"></canvas>
    <div id="gameResult"></div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const shipImg = new Image();
        shipImg.src = "andrea.png";  // La nave de Andrea

        const asteroidImg = new Image();
        asteroidImg.src = "alex.png"; // Asteroides (Alex)

        let projectiles = [];
        let asteroids = [];
        let shipSpeed = 7;
        let shipDirection = 0;
        let destroyedAsteroids = 0;
        let gameOver = false;
        let gameStartTime = Date.now();

        const ship = {
            x: canvas.width / 2 - 25,
            y: canvas.height - 100,
            width: 50,
            height: 50
        };

        function shoot() {
            projectiles.push({ x: ship.x + 20, y: ship.y, speed: 5 });
        }

        document.addEventListener("keydown", (event) => {
            if (event.code === "ArrowLeft") shipDirection = -1;
            if (event.code === "ArrowRight") shipDirection = 1;
            if (event.code === "Space") shoot();
        });

        document.addEventListener("keyup", (event) => {
            if (event.code === "ArrowLeft" || event.code === "ArrowRight") shipDirection = 0;
        });

        function createAsteroid() {
            let x = Math.random() * canvas.width;
            let y = Math.random() * (canvas.height / 2) - 50; // Solo aparecen en la mitad superior
            let speedY = 2 + Math.random() * 2; // Velocidad aleatoria

            asteroids.push({ x, y, speedY, width: 50, height: 50 });
        }

        setInterval(createAsteroid, 1000);

        function update() {
            if (gameOver) return;

            // Verificar si pasaron mÃ¡s de 45 segundos
            let elapsedTime = (Date.now() - gameStartTime) / 1000;
            if (elapsedTime > 45) {
                endGame(false);
                return;
            }

            ship.x += shipSpeed * shipDirection;
            if (ship.x < 0) ship.x = 0;
            if (ship.x + ship.width > canvas.width) ship.x = canvas.width - ship.width;

            // Mover proyectiles
            for (let i = 0; i < projectiles.length; i++) {
                projectiles[i].y -= projectiles[i].speed;
                if (projectiles[i].y < 0) projectiles.splice(i, 1);
            }

            // Mover asteroides
            for (let i = 0; i < asteroids.length; i++) {
                asteroids[i].y += asteroids[i].speedY;

                // ColisiÃ³n con la nave (Game Over)
                if (
                    asteroids[i].x < ship.x + ship.width &&
                    asteroids[i].x + asteroids[i].width > ship.x &&
                    asteroids[i].y < ship.y + ship.height &&
                    asteroids[i].y + asteroids[i].height > ship.y
                ) {
                    endGame(false);
                    return;
                }

                // ColisiÃ³n con proyectiles
                for (let j = 0; j < projectiles.length; j++) {
                    if (
                        projectiles[j].x < asteroids[i].x + asteroids[i].width &&
                        projectiles[j].x + 10 > asteroids[i].x &&
                        projectiles[j].y < asteroids[i].y + asteroids[i].height &&
                        projectiles[j].y + 10 > asteroids[i].y
                    ) {
                        document.getElementById("impactSound").play();
                        asteroids.splice(i, 1);
                        projectiles.splice(j, 1);
                        destroyedAsteroids++;

                        // Si destruyÃ³ 10 asteroides, gana
                        if (destroyedAsteroids >= 10) {
                            endGame(true);
                        }
                        break;
                    }
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);
            ctx.fillStyle = "yellow";
            ctx.font = "16px Arial";
            for (let i = 0; i < projectiles.length; i++) {
                ctx.fillText("QUIERO DINERO", projectiles[i].x, projectiles[i].y);
            }
            for (let i = 0; i < asteroids.length; i++) {
                ctx.drawImage(asteroidImg, asteroids[i].x, asteroids[i].y, asteroids[i].width, asteroids[i].height);
            }
        }

        function endGame(won) {
            gameOver = true;
            let resultDiv = document.getElementById("gameResult");
            resultDiv.style.display = "block";

            if (won) {
                resultDiv.innerHTML = `<p>Â¡Felicidades! Ganaste ðŸŽ‰</p><img src="andrea.png" style="filter: hue-rotate(180deg);">`;
            } else {
                resultDiv.innerHTML = `<p>Â¡Game Over! ðŸ˜¢</p><img src="andrea.png" style="filter: grayscale(100%);">`;
            }

            setTimeout(() => {
                location.reload(); // Reiniciar juego despuÃ©s de mostrar el resultado
            }, 3000);
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
